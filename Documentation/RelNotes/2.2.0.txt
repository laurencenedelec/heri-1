Git v2.2 Release Notes
======================

Updates since v2.1
------------------

Ports

 * Building on older MacOS X systems automatically sets
   the necessary NO_APPLE_COMMON_CRYPTO build-time option.


UI, Workflows & Features

 * "git config --edit --global" starts from a skeletal per-user
   configuration file contents, instead of a total blank, when the
   user does not already have any.  This immediately reduces the
   need for a later "Have you forgotten setting core.user?" and we
   can add more to the template as we gain more experience.

 * "git stash list -p" used to be almost always a no-op because each
   stash entry is represented as a merge commit.  It learned to show
   the difference between the base commit version and the working tree
   version, which is in line with what "git show" gives.

Performance, Internal Implementation, etc.

 * In tests, we have been using NOT_{MINGW,CYGWIN} test prerequisites
   long before negated prerequisites e.g. !MINGW were invented.
   The former has been converted to the latter to avoid confusion.

 * Looking up remotes configuration in a repository with very many
   remotes defined has been optimized.

 * There are cases where you lock and open to write a file, close it
   to show the updated contents to external processes, and then have
   to update the file again while still holding the lock, but the
   lockfile API lacked support for such an access pattern.

 * An in-core caching layer to let us avoid reading the same
   configuration files number of times has been added.

 * Various code paths have been cleaned up and simplified by using
   "strbuf", "starts_with()", and "skip_prefix()" APIs more.


Also contains various documentation updates and code clean-ups.


Fixes since v2.1
----------------

Unless otherwise noted, all the fixes since v2.1 in the maintenance
track are contained in this release (see the maintenance releases'
notes for details).

 * "git log --pretty/format=" with an empty format string did not
   mean the more obvious "No output whatsoever" but "Use default
   format", which was counterintuitive.
   (merge b9c7d6e jk/pretty-empty-format later to maint).

 * Implementations of "tar" that do not understand an extended pax
   header would extract the contents of it in a regular file; make
   sure the permission bits of this file follows the same tar.umask
   configuration setting.

 * "git -c section.var command" and "git -c section.var= command"
   should pass the configuration differently (the former should be a
   boolean true, the latter should be an empty string).
   (merge a789ca7 jk/command-line-config-empty-string later to maint).

 * Applying a patch not generated by Git in a subdirectory used to
   check the whitespace breakage using the attributes for incorrect
   paths. Also whitespace checks were performed even for paths
   excluded via "git apply --exclude=<path>" mechanism.
   (merge 477a08a jc/apply-ws-prefix later to maint).

 * "git bundle create" with date-range specification were meant to
   exclude tags outside the range, but it didn't.
   (merge 2c8544a lf/bundle-exclusion later to maint).

 * "git add x" where x that used to be a directory has become a
   symbolic link to a directory misbehaved.
   (merge ccad42d rs/refresh-beyond-symlink later to maint).

 * The prompt script checked $GIT_DIR/ref/stash file to see if there
   is a stash, which was a no-no.
   (merge 0fa7f01 jk/prompt-stash-could-be-packed later to maint).

 * Pack-protocol documentation had a minor typo.
   (merge 5d146f7 sp/pack-protocol-doc-on-shallow later to maint).
