Git v1.7.11 Release Notes
=========================

Updates since v1.7.10
---------------------

UI, Workflows & Features

 * A third-party tool "git subtree" is distributed in contrib/

 * Error messages given when @{u} is used for a branch without its
   upstream configured have been clatified.

 * Even with "-q"uiet option, "checkout" used to report setting up
   tracking.  Also "branch" learned the "-q"uiet option to squelch
   informational message.

 * The smart-http backend used to always override GIT_COMMITTER_*
   variables with REMOTE_USER and REMOTE_ADDR, but these variables are
   now preserved when set.

 * "git am" learned the "--include" option, which is an opposite of
   existing the "--exclude" option.

 * When "git am -3" needs to fall back to an application to a
   synthesized preimage followed by a 3-way merge, the paths that
   needed such treatment are now reported to the end user, so that the
   result in them can be eyeballed with extra care.

 * The "fmt-merge-msg" command learns to list the primary contributors
   involved in the side topic you are merging.

 * The cases "git push" fails due to non-ff can be broken into three
   categories; each case is given a separate advise message.

 * "git push --recurse-submodules" learned to optionally look into the
   histories of submodules bound to the superproject and push them
   out.

 * A 'snapshot' request to "gitweb" honors If-Modified-Since: header,
   based on the commit date.

 * "gitweb" learned to highlight the patch it outputs even more.

Foreign Interface

 * "git svn" used to die with unwanted SIGPIPE when talking with HTTP
   server that uses keep-alive.

 * "git p4" has been moved out of contrib/ area.

Performance

 * "git apply" had some memory leaks plugged.

 * Setting up a revision traversal with many starting points was
   inefficient as these were placed in a date-order priority queue
   one-by-one.  Now they are collected in the queue unordered first,
   and sorted immediately before getting used.

Internal Implementation (please report possible regressions)

 * "git rev-parse --show-prefix" used to emit nothing when run at the
   top-level of the working tree, but now it gives a blank line.

 * Minor memory leak during unpack_trees (hence "merge" and "checkout"
   to check out another branch) has been plugged.

 * More lower-level commands learned to use the streaming API to read
   from the object store without keeping everything in core.

 * Because "sh" on the user's PATH may be utterly broken on some
   systems, run-command API now uses SHELL_PATH, not /bin/sh, when
   spawning an external command (not applicable to Windows port).

 * The API to iterate over refs/ hierarchy has been tweaked to allow
   walking only a subset of it more efficiently.

Also contains minor documentation updates and code clean-ups.


Fixes since v1.7.10
-------------------

Unless otherwise noted, all the fixes since v1.7.10 in the maintenance
releases are contained in this release (see release notes to them for
details).

 * The parser in "fast-import" did not diagnose ":9" style references
   that is not followed by required SP/LF as an error.
   (merge 06454cb pw/fast-import-dataref-parsing later to maint).

 * When "git fetch" encounters repositories with too many references,
   the command line of "fetch-pack" that is run by a helper
   e.g. remote-curl, may fail to hold all of them. Now such an
   internal invocation can feed the references through the standard
   input of "fetch-pack".
   (merge 7103d25 it/fetch-pack-many-refs later to maint).

 * "git fetch" that recurses into submodules on demand did not check
   if it needs to go into submodules when non branches (most notably,
   tags) are fetched.
   (merge a6801ad jl/maint-submodule-recurse-fetch later to maint).

 * "git blame" started missing quite a few changes from the origin
   since we stopped using the diff minimalization by default in v1.7.2
   era.
   (merge 059a500 jc/maint-blame-minimal later to maint).

 * "log -p --graph" used with "--stat" had a few formatting error.
   (merge e2c5966 lp/maint-diff-three-dash-with-graph later to maint).

 * Giving "--continue" to a conflicted "rebase -i" session skipped a
   commit that only results in changes to submodules.
   (merge a6754cd jk/rebase-i-submodule-conflict-only later to maint).

 * When PATH contains an unreadable directory, alias expansion code
   did not kick in, and failed with an error that said "git-subcmd"
   was not found.
   (merge 38f865c jk/run-command-eacces later to maint).

 * The 'push to upstream' implementation was broken in some corner
   cases. "git push $there" without refspec, when the current branch
   is set to push to a remote different from $there, used to push to
   $there using the upstream information to a remote unreleated to
   $there.
   (merge 135dade jc/push-upstream-sanity later to maint).

 * "git clean -d -f" (not "-d -f -f") is supposed to protect nested
   working trees of independent git repositories that exist in the
   current project working tree from getting removed, but the
   protection applied only to such working trees that are at the
   top-level of the current project by mistake.
   (merge ae2f203 jc/maint-clean-nested-worktree-in-subdir later to maint).

 * Rename detection logic used to match two empty files as renames
   during merge-recursive, leading unnatural mismerges.
   (merge 4f7cb99 jk/diff-no-rename-empty later to maint).

 * An age-old corner case bug in combine diff (only triggered with -U0
   and the hunk at the beginning of the file needs to be shown) has
   been fixed.
   (merge e5e9b56 rs/combine-diff-zero-context-at-the-beginning later to maint).

 * When "git commit --template F" errors out because the user did not
   touch the message, it claimed that it aborts due to "empty
   message", which was utterly wrong.
   (merge 1f08c2c jc/commit-unedited-template later to maint).

 * "git add -p" is not designed to deal with unmerged paths but did
   not exclude them and tried to apply funny patches only to fail.
   (merge 4066bd6 jk/add-p-skip-conflicts later to maint).

 * "git commit --author=$name" did not tell the name that was being
   recorded in the resulting commit to hooks, even though it does do
   so when the end user overrode the authorship via the
   "GIT_AUTHOR_NAME" environment variable.
   (merge 7dfe8ad jc/commit-hook-authorship later to maint).

 * The regexp configured with diff.wordregex was incorrectly reused
   across files.
   (merge 6440d34 tr/maint-word-diff-regex-sticky later to maint).

 * Running "notes merge --commit" failed to perform correctly when run
   from any directory inside $GIT_DIR/.  When "notes merge" stops with
   conflicts, $GIT_DIR/NOTES_MERGE_WORKTREE is the place a user edits
   to resolve it.
   (merge dabba59 jh/notes-merge-in-git-dir-worktree later to maint).
